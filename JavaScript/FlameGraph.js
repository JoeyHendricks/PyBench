var payload = {

  'LXKL87KF': {'name': 'LXKL87KF', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  'K72HIHS0': {'name': 'K72HIHS0', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  'OUNR60WH': {'name': 'OUNR60WH', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  'CNC7UYMH': {'name': 'CNC7UYMH', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  'X2I7U5LM': {'name': 'X2I7U5LM', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  'OED57UKG': {'name': 'OED57UKG', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  'WU73L3AU': {'name': 'WU73L3AU', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  'JQ9HDZBP': {'name': 'JQ9HDZBP', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  '252UXM1E': {'name': '252UXM1E', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

  '530G9DQY': {'name': '530G9DQY', 'children': [{'name': 'say_my_name_and_more', 'children': [{'name': 'sleep_based_on_name_length', 'children': [{'name': '<built-in method time.sleep>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}], 'value': 10}, {'name': '<built-in method builtins.print>', 'children': [], 'value': 1}, {'name': 'length_of_name', 'children': [{'name': 'show_message_when_name_very_long', 'children': [{'name': 'x', 'children': [{'name': 'y', 'children': [{'name': 'foo', 'children': [], 'value': 1}], 'value': 2}], 'value': 3}], 'value': 4}, {'name': '<built-in method builtins.len>', 'children': [], 'value': 1}], 'value': 7}, {'name': 'capitalize_name', 'children': [{'name': "<method 'capitalize' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'lowercase_name', 'children': [{'name': "<method 'lower' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}, {'name': 'uppercase_name', 'children': [{'name': "<method 'upper' of 'str' objects>", 'children': [], 'value': 1}], 'value': 2}], 'value': 30}], 'value': 31},

};

var flameGraph = null;

$(document).ready(function(){
  $(document).ready(render_flame_graph);
  $('#sample').on('change', render_flame_graph);
});

document.getElementById("form").addEventListener("submit", function(event){
  event.preventDefault();
  search();
});

function search() {
  var term = document.getElementById("term").value;
  flameGraph.search(term);
}

function clear() {
  document.getElementById('term').value = '';
  flameGraph.clear();
}

function resetZoom() {
  flameGraph.resetZoom();
}

function onClick(d) {
  console.info("Clicked on " + d.data.name);
}

function render_flame_graph(){

  $("#chart").empty();
  var selected_sample = $('select[id="sample"] option:selected').val()

  flameGraph = d3.flamegraph()
  .width(960)
  .cellHeight(25)
  .transitionDuration(750)
  .minFrameSize(5)
  .transitionEase(d3.easeCubic)
  .sort(true)
  .title("")
  .onClick(onClick)
  .differential(false)
  .selfValue(false);

  var details = document.getElementById("details");
  flameGraph.setDetailsElement(details);

  d3.select("#chart")
  .datum(payload[selected_sample])
  .call(flameGraph);
}